{"ast":null,"code":"let isBalancing = false;\nlet balanceStartTime = 0;\nlet lastFeedbackTime = 0;\nexport function resetBalanceTraining() {\n  isBalancing = false;\n  balanceStartTime = 0;\n  lastFeedbackTime = 0;\n}\nexport function processBalanceTraining(landmarks) {\n  const now = Date.now();\n  const leftKnee = landmarks[25];\n  const leftAnkle = landmarks[27];\n  const rightKnee = landmarks[26];\n  const rightAnkle = landmarks[28];\n  const leftHip = landmarks[23];\n  const rightHip = landmarks[24];\n  if (!leftKnee || !leftAnkle || !rightKnee || !rightAnkle || !leftHip || !rightHip) {\n    return {\n      speak: 'Make sure your full body is visible to the camera'\n    };\n  }\n  const leftLegUp = leftAnkle.y < leftKnee.y - 0.05 && leftKnee.y < leftHip.y;\n  const rightLegUp = rightAnkle.y < rightKnee.y - 0.05 && rightKnee.y < rightHip.y;\n  const isLegLifted = leftLegUp || rightLegUp;\n  if (isLegLifted && !isBalancing) {\n    isBalancing = true;\n    balanceStartTime = now;\n    return {\n      speak: 'Good! Hold your leg up'\n    };\n  }\n  if (isLegLifted && isBalancing && now - balanceStartTime >= 3000) {\n    isBalancing = false;\n    return {\n      speak: 'Great balance!',\n      rep: 1\n    };\n  }\n  if (!isLegLifted && isBalancing) {\n    isBalancing = false;\n    return {\n      speak: 'Try again. Lift and hold one leg'\n    };\n  }\n  if (!isLegLifted && now - lastFeedbackTime > 4000) {\n    lastFeedbackTime = now;\n    return {\n      speak: 'Please lift and hold one leg'\n    };\n  }\n  return null;\n}","map":{"version":3,"names":["isBalancing","balanceStartTime","lastFeedbackTime","resetBalanceTraining","processBalanceTraining","landmarks","now","Date","leftKnee","leftAnkle","rightKnee","rightAnkle","leftHip","rightHip","speak","leftLegUp","y","rightLegUp","isLegLifted","rep"],"sources":["/Users/jesvinblazegmail.com/PycharmProjects/Ai-rehab/src/exercises/BalanceTraining.js"],"sourcesContent":["let isBalancing = false;\nlet balanceStartTime = 0;\nlet lastFeedbackTime = 0;\n\nexport function resetBalanceTraining() {\n  isBalancing = false;\n  balanceStartTime = 0;\n  lastFeedbackTime = 0;\n}\n\nexport function processBalanceTraining(landmarks) {\n  const now = Date.now();\n\n  const leftKnee = landmarks[25];\n  const leftAnkle = landmarks[27];\n  const rightKnee = landmarks[26];\n  const rightAnkle = landmarks[28];\n  const leftHip = landmarks[23];\n  const rightHip = landmarks[24];\n\n  if (!leftKnee || !leftAnkle || !rightKnee || !rightAnkle || !leftHip || !rightHip) {\n    return { speak: 'Make sure your full body is visible to the camera' };\n  }\n\n  const leftLegUp = leftAnkle.y < leftKnee.y - 0.05 && leftKnee.y < leftHip.y;\n  const rightLegUp = rightAnkle.y < rightKnee.y - 0.05 && rightKnee.y < rightHip.y;\n  const isLegLifted = leftLegUp || rightLegUp;\n\n  if (isLegLifted && !isBalancing) {\n    isBalancing = true;\n    balanceStartTime = now;\n    return { speak: 'Good! Hold your leg up' };\n  }\n\n  if (isLegLifted && isBalancing && now - balanceStartTime >= 3000) {\n    isBalancing = false;\n    return { speak: 'Great balance!', rep: 1 };\n  }\n\n  if (!isLegLifted && isBalancing) {\n    isBalancing = false;\n    return { speak: 'Try again. Lift and hold one leg' };\n  }\n\n  if (!isLegLifted && now - lastFeedbackTime > 4000) {\n    lastFeedbackTime = now;\n    return { speak: 'Please lift and hold one leg' };\n  }\n\n  return null;\n}\n"],"mappings":"AAAA,IAAIA,WAAW,GAAG,KAAK;AACvB,IAAIC,gBAAgB,GAAG,CAAC;AACxB,IAAIC,gBAAgB,GAAG,CAAC;AAExB,OAAO,SAASC,oBAAoBA,CAAA,EAAG;EACrCH,WAAW,GAAG,KAAK;EACnBC,gBAAgB,GAAG,CAAC;EACpBC,gBAAgB,GAAG,CAAC;AACtB;AAEA,OAAO,SAASE,sBAAsBA,CAACC,SAAS,EAAE;EAChD,MAAMC,GAAG,GAAGC,IAAI,CAACD,GAAG,CAAC,CAAC;EAEtB,MAAME,QAAQ,GAAGH,SAAS,CAAC,EAAE,CAAC;EAC9B,MAAMI,SAAS,GAAGJ,SAAS,CAAC,EAAE,CAAC;EAC/B,MAAMK,SAAS,GAAGL,SAAS,CAAC,EAAE,CAAC;EAC/B,MAAMM,UAAU,GAAGN,SAAS,CAAC,EAAE,CAAC;EAChC,MAAMO,OAAO,GAAGP,SAAS,CAAC,EAAE,CAAC;EAC7B,MAAMQ,QAAQ,GAAGR,SAAS,CAAC,EAAE,CAAC;EAE9B,IAAI,CAACG,QAAQ,IAAI,CAACC,SAAS,IAAI,CAACC,SAAS,IAAI,CAACC,UAAU,IAAI,CAACC,OAAO,IAAI,CAACC,QAAQ,EAAE;IACjF,OAAO;MAAEC,KAAK,EAAE;IAAoD,CAAC;EACvE;EAEA,MAAMC,SAAS,GAAGN,SAAS,CAACO,CAAC,GAAGR,QAAQ,CAACQ,CAAC,GAAG,IAAI,IAAIR,QAAQ,CAACQ,CAAC,GAAGJ,OAAO,CAACI,CAAC;EAC3E,MAAMC,UAAU,GAAGN,UAAU,CAACK,CAAC,GAAGN,SAAS,CAACM,CAAC,GAAG,IAAI,IAAIN,SAAS,CAACM,CAAC,GAAGH,QAAQ,CAACG,CAAC;EAChF,MAAME,WAAW,GAAGH,SAAS,IAAIE,UAAU;EAE3C,IAAIC,WAAW,IAAI,CAAClB,WAAW,EAAE;IAC/BA,WAAW,GAAG,IAAI;IAClBC,gBAAgB,GAAGK,GAAG;IACtB,OAAO;MAAEQ,KAAK,EAAE;IAAyB,CAAC;EAC5C;EAEA,IAAII,WAAW,IAAIlB,WAAW,IAAIM,GAAG,GAAGL,gBAAgB,IAAI,IAAI,EAAE;IAChED,WAAW,GAAG,KAAK;IACnB,OAAO;MAAEc,KAAK,EAAE,gBAAgB;MAAEK,GAAG,EAAE;IAAE,CAAC;EAC5C;EAEA,IAAI,CAACD,WAAW,IAAIlB,WAAW,EAAE;IAC/BA,WAAW,GAAG,KAAK;IACnB,OAAO;MAAEc,KAAK,EAAE;IAAmC,CAAC;EACtD;EAEA,IAAI,CAACI,WAAW,IAAIZ,GAAG,GAAGJ,gBAAgB,GAAG,IAAI,EAAE;IACjDA,gBAAgB,GAAGI,GAAG;IACtB,OAAO;MAAEQ,KAAK,EAAE;IAA+B,CAAC;EAClD;EAEA,OAAO,IAAI;AACb","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}