{"ast":null,"code":"let squatStarted = false;\nlet repCount = 0;\nlet voice;\nexport function processChairSquat(keypoints) {\n  if (!keypoints || keypoints.length === 0) return {\n    reps: repCount,\n    feedback: null\n  };\n  const leftHip = keypoints.find(k => k.name === 'left_hip');\n  const rightHip = keypoints.find(k => k.name === 'right_hip');\n  const leftKnee = keypoints.find(k => k.name === 'left_knee');\n  const rightKnee = keypoints.find(k => k.name === 'right_knee');\n  if ([leftHip, rightHip, leftKnee, rightKnee].some(k => !k || k.score < 0.5)) {\n    return {\n      reps: repCount,\n      feedback: null\n    };\n  }\n  const avgHipY = (leftHip.y + rightHip.y) / 2;\n  const avgKneeY = (leftKnee.y + rightKnee.y) / 2;\n  const isSquatting = avgHipY > avgKneeY + 30;\n  if (isSquatting && !squatStarted) {\n    squatStarted = true;\n    speak('Hold your position, good squat!');\n  }\n  if (!isSquatting && squatStarted) {\n    repCount += 1;\n    squatStarted = false;\n    speak('Squat complete. Good job!');\n  }\n  return {\n    reps: repCount,\n    feedback: isSquatting ? 'Squatting' : 'Standing'\n  };\n}\nexport function resetChairSquat() {\n  squatStarted = false;\n  repCount = 0;\n  if (voice) window.speechSynthesis.cancel();\n}\nfunction speak(text) {\n  if (!voice) voice = new SpeechSynthesisUtterance();\n  voice.text = text;\n  window.speechSynthesis.cancel(); // Stop ongoing\n  window.speechSynthesis.speak(voice);\n}","map":{"version":3,"names":["squatStarted","repCount","voice","processChairSquat","keypoints","length","reps","feedback","leftHip","find","k","name","rightHip","leftKnee","rightKnee","some","score","avgHipY","y","avgKneeY","isSquatting","speak","resetChairSquat","window","speechSynthesis","cancel","text","SpeechSynthesisUtterance"],"sources":["/Users/jesvinblazegmail.com/PycharmProjects/Ai-rehab/src/exercises/ChairSquats.js"],"sourcesContent":["let squatStarted = false;\nlet repCount = 0;\nlet voice;\n\nexport function processChairSquat(keypoints) {\n  if (!keypoints || keypoints.length === 0) return { reps: repCount, feedback: null };\n\n  const leftHip = keypoints.find(k => k.name === 'left_hip');\n  const rightHip = keypoints.find(k => k.name === 'right_hip');\n  const leftKnee = keypoints.find(k => k.name === 'left_knee');\n  const rightKnee = keypoints.find(k => k.name === 'right_knee');\n\n  if ([leftHip, rightHip, leftKnee, rightKnee].some(k => !k || k.score < 0.5)) {\n    return { reps: repCount, feedback: null };\n  }\n\n  const avgHipY = (leftHip.y + rightHip.y) / 2;\n  const avgKneeY = (leftKnee.y + rightKnee.y) / 2;\n\n  const isSquatting = avgHipY > avgKneeY + 30;\n\n  if (isSquatting && !squatStarted) {\n    squatStarted = true;\n    speak('Hold your position, good squat!');\n  }\n\n  if (!isSquatting && squatStarted) {\n    repCount += 1;\n    squatStarted = false;\n    speak('Squat complete. Good job!');\n  }\n\n  return { reps: repCount, feedback: isSquatting ? 'Squatting' : 'Standing' };\n}\n\nexport function resetChairSquat() {\n  squatStarted = false;\n  repCount = 0;\n  if (voice) window.speechSynthesis.cancel();\n}\n\nfunction speak(text) {\n  if (!voice) voice = new SpeechSynthesisUtterance();\n  voice.text = text;\n  window.speechSynthesis.cancel(); // Stop ongoing\n  window.speechSynthesis.speak(voice);\n}\n"],"mappings":"AAAA,IAAIA,YAAY,GAAG,KAAK;AACxB,IAAIC,QAAQ,GAAG,CAAC;AAChB,IAAIC,KAAK;AAET,OAAO,SAASC,iBAAiBA,CAACC,SAAS,EAAE;EAC3C,IAAI,CAACA,SAAS,IAAIA,SAAS,CAACC,MAAM,KAAK,CAAC,EAAE,OAAO;IAAEC,IAAI,EAAEL,QAAQ;IAAEM,QAAQ,EAAE;EAAK,CAAC;EAEnF,MAAMC,OAAO,GAAGJ,SAAS,CAACK,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,IAAI,KAAK,UAAU,CAAC;EAC1D,MAAMC,QAAQ,GAAGR,SAAS,CAACK,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,IAAI,KAAK,WAAW,CAAC;EAC5D,MAAME,QAAQ,GAAGT,SAAS,CAACK,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,IAAI,KAAK,WAAW,CAAC;EAC5D,MAAMG,SAAS,GAAGV,SAAS,CAACK,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,IAAI,KAAK,YAAY,CAAC;EAE9D,IAAI,CAACH,OAAO,EAAEI,QAAQ,EAAEC,QAAQ,EAAEC,SAAS,CAAC,CAACC,IAAI,CAACL,CAAC,IAAI,CAACA,CAAC,IAAIA,CAAC,CAACM,KAAK,GAAG,GAAG,CAAC,EAAE;IAC3E,OAAO;MAAEV,IAAI,EAAEL,QAAQ;MAAEM,QAAQ,EAAE;IAAK,CAAC;EAC3C;EAEA,MAAMU,OAAO,GAAG,CAACT,OAAO,CAACU,CAAC,GAAGN,QAAQ,CAACM,CAAC,IAAI,CAAC;EAC5C,MAAMC,QAAQ,GAAG,CAACN,QAAQ,CAACK,CAAC,GAAGJ,SAAS,CAACI,CAAC,IAAI,CAAC;EAE/C,MAAME,WAAW,GAAGH,OAAO,GAAGE,QAAQ,GAAG,EAAE;EAE3C,IAAIC,WAAW,IAAI,CAACpB,YAAY,EAAE;IAChCA,YAAY,GAAG,IAAI;IACnBqB,KAAK,CAAC,iCAAiC,CAAC;EAC1C;EAEA,IAAI,CAACD,WAAW,IAAIpB,YAAY,EAAE;IAChCC,QAAQ,IAAI,CAAC;IACbD,YAAY,GAAG,KAAK;IACpBqB,KAAK,CAAC,2BAA2B,CAAC;EACpC;EAEA,OAAO;IAAEf,IAAI,EAAEL,QAAQ;IAAEM,QAAQ,EAAEa,WAAW,GAAG,WAAW,GAAG;EAAW,CAAC;AAC7E;AAEA,OAAO,SAASE,eAAeA,CAAA,EAAG;EAChCtB,YAAY,GAAG,KAAK;EACpBC,QAAQ,GAAG,CAAC;EACZ,IAAIC,KAAK,EAAEqB,MAAM,CAACC,eAAe,CAACC,MAAM,CAAC,CAAC;AAC5C;AAEA,SAASJ,KAAKA,CAACK,IAAI,EAAE;EACnB,IAAI,CAACxB,KAAK,EAAEA,KAAK,GAAG,IAAIyB,wBAAwB,CAAC,CAAC;EAClDzB,KAAK,CAACwB,IAAI,GAAGA,IAAI;EACjBH,MAAM,CAACC,eAAe,CAACC,MAAM,CAAC,CAAC,CAAC,CAAC;EACjCF,MAAM,CAACC,eAAe,CAACH,KAAK,CAACnB,KAAK,CAAC;AACrC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}