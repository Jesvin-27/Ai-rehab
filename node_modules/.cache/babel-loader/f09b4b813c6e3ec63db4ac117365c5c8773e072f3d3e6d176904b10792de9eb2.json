{"ast":null,"code":"export class ChairSquatTracker {\n  constructor() {\n    this.squatStarted = false;\n    this.repCount = 0;\n    this.minConfidence = 0.5;\n    this.squatThreshold = 30;\n    this.lastFeedback = '';\n  }\n  process(keypoints) {\n    if (!keypoints || keypoints.length === 0) {\n      return {\n        reps: this.repCount,\n        feedback: 'No keypoints detected'\n      };\n    }\n    const leftHip = keypoints.find(k => k.name === 'left_hip');\n    const rightHip = keypoints.find(k => k.name === 'right_hip');\n    const leftKnee = keypoints.find(k => k.name === 'left_knee');\n    const rightKnee = keypoints.find(k => k.name === 'right_knee');\n    if ([leftHip, rightHip, leftKnee, rightKnee].some(k => !k || k.score < this.minConfidence)) {\n      return {\n        reps: this.repCount,\n        feedback: 'Not all keypoints visible'\n      };\n    }\n    const avgHipY = (leftHip.y + rightHip.y) / 2;\n    const avgKneeY = (leftKnee.y + rightKnee.y) / 2;\n    const isSquatting = avgHipY > avgKneeY + this.squatThreshold;\n    let feedback = '';\n    if (isSquatting && !this.squatStarted) {\n      this.squatStarted = true;\n      feedback = 'Squatting: Hold steady!';\n      this.speakOnce('Hold your position. Good squat!');\n    }\n    if (!isSquatting && this.squatStarted) {\n      this.repCount += 1;\n      this.squatStarted = false;\n      feedback = 'Standing: Ready for next squat';\n      this.speakOnce('Squat complete. Great job!');\n    }\n    if (!feedback) {\n      feedback = isSquatting ? 'Squatting...' : 'Standing...';\n    }\n    return {\n      reps: this.repCount,\n      feedback\n    };\n  }\n  speakOnce(text) {\n    if (this.lastFeedback === text) return;\n    this.lastFeedback = text;\n    const msg = new SpeechSynthesisUtterance(text);\n    msg.rate = 0.9;\n    msg.pitch = 1;\n    window.speechSynthesis.cancel();\n    window.speechSynthesis.speak(msg);\n  }\n  reset() {\n    this.squatStarted = false;\n    this.repCount = 0;\n    this.lastFeedback = '';\n    window.speechSynthesis.cancel();\n  }\n}","map":{"version":3,"names":["ChairSquatTracker","constructor","squatStarted","repCount","minConfidence","squatThreshold","lastFeedback","process","keypoints","length","reps","feedback","leftHip","find","k","name","rightHip","leftKnee","rightKnee","some","score","avgHipY","y","avgKneeY","isSquatting","speakOnce","text","msg","SpeechSynthesisUtterance","rate","pitch","window","speechSynthesis","cancel","speak","reset"],"sources":["/Users/jesvinblazegmail.com/PycharmProjects/Ai-rehab/src/exercises/ChairSquats.js"],"sourcesContent":["export class ChairSquatTracker {\n  constructor() {\n    this.squatStarted = false;\n    this.repCount = 0;\n    this.minConfidence = 0.5;\n    this.squatThreshold = 30;\n    this.lastFeedback = '';\n  }\n\n  process(keypoints) {\n    if (!keypoints || keypoints.length === 0) {\n      return { reps: this.repCount, feedback: 'No keypoints detected' };\n    }\n\n    const leftHip = keypoints.find(k => k.name === 'left_hip');\n    const rightHip = keypoints.find(k => k.name === 'right_hip');\n    const leftKnee = keypoints.find(k => k.name === 'left_knee');\n    const rightKnee = keypoints.find(k => k.name === 'right_knee');\n\n    if ([leftHip, rightHip, leftKnee, rightKnee].some(k => !k || k.score < this.minConfidence)) {\n      return { reps: this.repCount, feedback: 'Not all keypoints visible' };\n    }\n\n    const avgHipY = (leftHip.y + rightHip.y) / 2;\n    const avgKneeY = (leftKnee.y + rightKnee.y) / 2;\n    const isSquatting = avgHipY > avgKneeY + this.squatThreshold;\n\n    let feedback = '';\n\n    if (isSquatting && !this.squatStarted) {\n      this.squatStarted = true;\n      feedback = 'Squatting: Hold steady!';\n      this.speakOnce('Hold your position. Good squat!');\n    }\n\n    if (!isSquatting && this.squatStarted) {\n      this.repCount += 1;\n      this.squatStarted = false;\n      feedback = 'Standing: Ready for next squat';\n      this.speakOnce('Squat complete. Great job!');\n    }\n\n    if (!feedback) {\n      feedback = isSquatting ? 'Squatting...' : 'Standing...';\n    }\n\n    return { reps: this.repCount, feedback };\n  }\n\n  speakOnce(text) {\n    if (this.lastFeedback === text) return;\n    this.lastFeedback = text;\n    const msg = new SpeechSynthesisUtterance(text);\n    msg.rate = 0.9;\n    msg.pitch = 1;\n    window.speechSynthesis.cancel();\n    window.speechSynthesis.speak(msg);\n  }\n\n  reset() {\n    this.squatStarted = false;\n    this.repCount = 0;\n    this.lastFeedback = '';\n    window.speechSynthesis.cancel();\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}