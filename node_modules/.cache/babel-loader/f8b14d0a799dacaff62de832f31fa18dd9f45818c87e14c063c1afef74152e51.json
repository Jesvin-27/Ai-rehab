{"ast":null,"code":"let isHolding = false;\nlet holdStart = 0;\nlet lastSpoken = 0;\nexport function resetBalanceTraining() {\n  isHolding = false;\n  holdStart = 0;\n  lastSpoken = 0;\n}\nexport function processBalanceTraining(landmarks) {\n  const now = Date.now();\n  const leftHip = landmarks[23];\n  const leftKnee = landmarks[25];\n  const leftAnkle = landmarks[27];\n  const rightHip = landmarks[24];\n  const rightKnee = landmarks[26];\n  const rightAnkle = landmarks[28];\n  if (!leftHip || !leftKnee || !leftAnkle || !rightHip || !rightKnee || !rightAnkle) {\n    return {\n      speak: 'Ensure full body is visible'\n    };\n  }\n  const leftLegLifted = leftAnkle.y < leftKnee.y - 0.05 && leftKnee.y < leftHip.y;\n  const rightLegLifted = rightAnkle.y < rightKnee.y - 0.05 && rightKnee.y < rightHip.y;\n  const isLegLifted = leftLegLifted || rightLegLifted;\n  if (isLegLifted && !isHolding) {\n    isHolding = true;\n    holdStart = now;\n    return {\n      speak: 'Hold the leg up'\n    };\n  }\n  if (isLegLifted && isHolding && now - holdStart >= 3000) {\n    isHolding = false;\n    return {\n      speak: 'Great! Balance complete',\n      rep: 1\n    };\n  }\n  if (!isLegLifted && isHolding) {\n    isHolding = false;\n    return {\n      speak: 'Try again. Lift one leg'\n    };\n  }\n  if (!isLegLifted && now - lastSpoken > 5000) {\n    lastSpoken = now;\n    return {\n      speak: 'Please lift one leg and hold'\n    };\n  }\n  return null;\n}","map":{"version":3,"names":["isHolding","holdStart","lastSpoken","resetBalanceTraining","processBalanceTraining","landmarks","now","Date","leftHip","leftKnee","leftAnkle","rightHip","rightKnee","rightAnkle","speak","leftLegLifted","y","rightLegLifted","isLegLifted","rep"],"sources":["/Users/jesvinblazegmail.com/PycharmProjects/Ai-rehab/src/exercises/BalanceTraining.js"],"sourcesContent":["let isHolding = false;\nlet holdStart = 0;\nlet lastSpoken = 0;\n\nexport function resetBalanceTraining() {\n  isHolding = false;\n  holdStart = 0;\n  lastSpoken = 0;\n}\n\nexport function processBalanceTraining(landmarks) {\n  const now = Date.now();\n\n  const leftHip = landmarks[23];\n  const leftKnee = landmarks[25];\n  const leftAnkle = landmarks[27];\n  const rightHip = landmarks[24];\n  const rightKnee = landmarks[26];\n  const rightAnkle = landmarks[28];\n\n  if (!leftHip || !leftKnee || !leftAnkle || !rightHip || !rightKnee || !rightAnkle) {\n    return { speak: 'Ensure full body is visible' };\n  }\n\n  const leftLegLifted = leftAnkle.y < leftKnee.y - 0.05 && leftKnee.y < leftHip.y;\n  const rightLegLifted = rightAnkle.y < rightKnee.y - 0.05 && rightKnee.y < rightHip.y;\n  const isLegLifted = leftLegLifted || rightLegLifted;\n\n  if (isLegLifted && !isHolding) {\n    isHolding = true;\n    holdStart = now;\n    return { speak: 'Hold the leg up' };\n  }\n\n  if (isLegLifted && isHolding && now - holdStart >= 3000) {\n    isHolding = false;\n    return { speak: 'Great! Balance complete', rep: 1 };\n  }\n\n  if (!isLegLifted && isHolding) {\n    isHolding = false;\n    return { speak: 'Try again. Lift one leg' };\n  }\n\n  if (!isLegLifted && now - lastSpoken > 5000) {\n    lastSpoken = now;\n    return { speak: 'Please lift one leg and hold' };\n  }\n\n  return null;\n}\n"],"mappings":"AAAA,IAAIA,SAAS,GAAG,KAAK;AACrB,IAAIC,SAAS,GAAG,CAAC;AACjB,IAAIC,UAAU,GAAG,CAAC;AAElB,OAAO,SAASC,oBAAoBA,CAAA,EAAG;EACrCH,SAAS,GAAG,KAAK;EACjBC,SAAS,GAAG,CAAC;EACbC,UAAU,GAAG,CAAC;AAChB;AAEA,OAAO,SAASE,sBAAsBA,CAACC,SAAS,EAAE;EAChD,MAAMC,GAAG,GAAGC,IAAI,CAACD,GAAG,CAAC,CAAC;EAEtB,MAAME,OAAO,GAAGH,SAAS,CAAC,EAAE,CAAC;EAC7B,MAAMI,QAAQ,GAAGJ,SAAS,CAAC,EAAE,CAAC;EAC9B,MAAMK,SAAS,GAAGL,SAAS,CAAC,EAAE,CAAC;EAC/B,MAAMM,QAAQ,GAAGN,SAAS,CAAC,EAAE,CAAC;EAC9B,MAAMO,SAAS,GAAGP,SAAS,CAAC,EAAE,CAAC;EAC/B,MAAMQ,UAAU,GAAGR,SAAS,CAAC,EAAE,CAAC;EAEhC,IAAI,CAACG,OAAO,IAAI,CAACC,QAAQ,IAAI,CAACC,SAAS,IAAI,CAACC,QAAQ,IAAI,CAACC,SAAS,IAAI,CAACC,UAAU,EAAE;IACjF,OAAO;MAAEC,KAAK,EAAE;IAA8B,CAAC;EACjD;EAEA,MAAMC,aAAa,GAAGL,SAAS,CAACM,CAAC,GAAGP,QAAQ,CAACO,CAAC,GAAG,IAAI,IAAIP,QAAQ,CAACO,CAAC,GAAGR,OAAO,CAACQ,CAAC;EAC/E,MAAMC,cAAc,GAAGJ,UAAU,CAACG,CAAC,GAAGJ,SAAS,CAACI,CAAC,GAAG,IAAI,IAAIJ,SAAS,CAACI,CAAC,GAAGL,QAAQ,CAACK,CAAC;EACpF,MAAME,WAAW,GAAGH,aAAa,IAAIE,cAAc;EAEnD,IAAIC,WAAW,IAAI,CAAClB,SAAS,EAAE;IAC7BA,SAAS,GAAG,IAAI;IAChBC,SAAS,GAAGK,GAAG;IACf,OAAO;MAAEQ,KAAK,EAAE;IAAkB,CAAC;EACrC;EAEA,IAAII,WAAW,IAAIlB,SAAS,IAAIM,GAAG,GAAGL,SAAS,IAAI,IAAI,EAAE;IACvDD,SAAS,GAAG,KAAK;IACjB,OAAO;MAAEc,KAAK,EAAE,yBAAyB;MAAEK,GAAG,EAAE;IAAE,CAAC;EACrD;EAEA,IAAI,CAACD,WAAW,IAAIlB,SAAS,EAAE;IAC7BA,SAAS,GAAG,KAAK;IACjB,OAAO;MAAEc,KAAK,EAAE;IAA0B,CAAC;EAC7C;EAEA,IAAI,CAACI,WAAW,IAAIZ,GAAG,GAAGJ,UAAU,GAAG,IAAI,EAAE;IAC3CA,UAAU,GAAGI,GAAG;IAChB,OAAO;MAAEQ,KAAK,EAAE;IAA+B,CAAC;EAClD;EAEA,OAAO,IAAI;AACb","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}