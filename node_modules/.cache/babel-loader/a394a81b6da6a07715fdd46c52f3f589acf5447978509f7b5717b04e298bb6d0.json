{"ast":null,"code":"// src/exercises/ChairSquats.js\nlet squatStarted = false;\nlet repCount = 0;\nlet voice;\nexport function processChairSquat(keypoints) {\n  if (!keypoints || !Array.isArray(keypoints) || keypoints.length === 0) return {\n    reps: repCount,\n    feedback: null\n  };\n  const get = name => keypoints.find(k => k.name === name);\n  const leftHip = get('left_hip');\n  const rightHip = get('right_hip');\n  const leftKnee = get('left_knee');\n  const rightKnee = get('right_knee');\n  if ([leftHip, rightHip, leftKnee, rightKnee].some(k => !k || k.score < 0.5)) {\n    return {\n      reps: repCount,\n      feedback: 'Pose not detected'\n    };\n  }\n  const avgHipY = (leftHip.y + rightHip.y) / 2;\n  const avgKneeY = (leftKnee.y + rightKnee.y) / 2;\n  const isSquatting = avgHipY > avgKneeY + 30;\n  if (isSquatting && !squatStarted) {\n    squatStarted = true;\n    speak('Hold your position. Good squat!');\n  }\n  if (!isSquatting && squatStarted) {\n    repCount += 1;\n    squatStarted = false;\n    speak('Squat complete. Great job!');\n  }\n  return {\n    reps: repCount,\n    feedback: isSquatting ? 'Squatting' : 'Standing'\n  };\n}\nexport function resetChairSquat() {\n  squatStarted = false;\n  repCount = 0;\n  if (voice) window.speechSynthesis.cancel();\n}\nfunction speak(text) {\n  if (!voice) voice = new SpeechSynthesisUtterance();\n  voice.text = text;\n  window.speechSynthesis.cancel();\n  window.speechSynthesis.speak(voice);\n}","map":{"version":3,"names":["squatStarted","repCount","voice","processChairSquat","keypoints","Array","isArray","length","reps","feedback","get","name","find","k","leftHip","rightHip","leftKnee","rightKnee","some","score","avgHipY","y","avgKneeY","isSquatting","speak","resetChairSquat","window","speechSynthesis","cancel","text","SpeechSynthesisUtterance"],"sources":["/Users/jesvinblazegmail.com/PycharmProjects/Ai-rehab/src/exercises/ChairSquats.js"],"sourcesContent":["// src/exercises/ChairSquats.js\nlet squatStarted = false;\nlet repCount = 0;\nlet voice;\n\nexport function processChairSquat(keypoints) {\n  if (!keypoints || !Array.isArray(keypoints) || keypoints.length === 0) return { reps: repCount, feedback: null };\n\n  const get = (name) => keypoints.find(k => k.name === name);\n  const leftHip = get('left_hip');\n  const rightHip = get('right_hip');\n  const leftKnee = get('left_knee');\n  const rightKnee = get('right_knee');\n\n  if ([leftHip, rightHip, leftKnee, rightKnee].some(k => !k || k.score < 0.5)) {\n    return { reps: repCount, feedback: 'Pose not detected' };\n  }\n\n  const avgHipY = (leftHip.y + rightHip.y) / 2;\n  const avgKneeY = (leftKnee.y + rightKnee.y) / 2;\n  const isSquatting = avgHipY > avgKneeY + 30;\n\n  if (isSquatting && !squatStarted) {\n    squatStarted = true;\n    speak('Hold your position. Good squat!');\n  }\n\n  if (!isSquatting && squatStarted) {\n    repCount += 1;\n    squatStarted = false;\n    speak('Squat complete. Great job!');\n  }\n\n  return { reps: repCount, feedback: isSquatting ? 'Squatting' : 'Standing' };\n}\n\nexport function resetChairSquat() {\n  squatStarted = false;\n  repCount = 0;\n  if (voice) window.speechSynthesis.cancel();\n}\n\nfunction speak(text) {\n  if (!voice) voice = new SpeechSynthesisUtterance();\n  voice.text = text;\n  window.speechSynthesis.cancel();\n  window.speechSynthesis.speak(voice);\n}\n"],"mappings":"AAAA;AACA,IAAIA,YAAY,GAAG,KAAK;AACxB,IAAIC,QAAQ,GAAG,CAAC;AAChB,IAAIC,KAAK;AAET,OAAO,SAASC,iBAAiBA,CAACC,SAAS,EAAE;EAC3C,IAAI,CAACA,SAAS,IAAI,CAACC,KAAK,CAACC,OAAO,CAACF,SAAS,CAAC,IAAIA,SAAS,CAACG,MAAM,KAAK,CAAC,EAAE,OAAO;IAAEC,IAAI,EAAEP,QAAQ;IAAEQ,QAAQ,EAAE;EAAK,CAAC;EAEhH,MAAMC,GAAG,GAAIC,IAAI,IAAKP,SAAS,CAACQ,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACF,IAAI,KAAKA,IAAI,CAAC;EAC1D,MAAMG,OAAO,GAAGJ,GAAG,CAAC,UAAU,CAAC;EAC/B,MAAMK,QAAQ,GAAGL,GAAG,CAAC,WAAW,CAAC;EACjC,MAAMM,QAAQ,GAAGN,GAAG,CAAC,WAAW,CAAC;EACjC,MAAMO,SAAS,GAAGP,GAAG,CAAC,YAAY,CAAC;EAEnC,IAAI,CAACI,OAAO,EAAEC,QAAQ,EAAEC,QAAQ,EAAEC,SAAS,CAAC,CAACC,IAAI,CAACL,CAAC,IAAI,CAACA,CAAC,IAAIA,CAAC,CAACM,KAAK,GAAG,GAAG,CAAC,EAAE;IAC3E,OAAO;MAAEX,IAAI,EAAEP,QAAQ;MAAEQ,QAAQ,EAAE;IAAoB,CAAC;EAC1D;EAEA,MAAMW,OAAO,GAAG,CAACN,OAAO,CAACO,CAAC,GAAGN,QAAQ,CAACM,CAAC,IAAI,CAAC;EAC5C,MAAMC,QAAQ,GAAG,CAACN,QAAQ,CAACK,CAAC,GAAGJ,SAAS,CAACI,CAAC,IAAI,CAAC;EAC/C,MAAME,WAAW,GAAGH,OAAO,GAAGE,QAAQ,GAAG,EAAE;EAE3C,IAAIC,WAAW,IAAI,CAACvB,YAAY,EAAE;IAChCA,YAAY,GAAG,IAAI;IACnBwB,KAAK,CAAC,iCAAiC,CAAC;EAC1C;EAEA,IAAI,CAACD,WAAW,IAAIvB,YAAY,EAAE;IAChCC,QAAQ,IAAI,CAAC;IACbD,YAAY,GAAG,KAAK;IACpBwB,KAAK,CAAC,4BAA4B,CAAC;EACrC;EAEA,OAAO;IAAEhB,IAAI,EAAEP,QAAQ;IAAEQ,QAAQ,EAAEc,WAAW,GAAG,WAAW,GAAG;EAAW,CAAC;AAC7E;AAEA,OAAO,SAASE,eAAeA,CAAA,EAAG;EAChCzB,YAAY,GAAG,KAAK;EACpBC,QAAQ,GAAG,CAAC;EACZ,IAAIC,KAAK,EAAEwB,MAAM,CAACC,eAAe,CAACC,MAAM,CAAC,CAAC;AAC5C;AAEA,SAASJ,KAAKA,CAACK,IAAI,EAAE;EACnB,IAAI,CAAC3B,KAAK,EAAEA,KAAK,GAAG,IAAI4B,wBAAwB,CAAC,CAAC;EAClD5B,KAAK,CAAC2B,IAAI,GAAGA,IAAI;EACjBH,MAAM,CAACC,eAAe,CAACC,MAAM,CAAC,CAAC;EAC/BF,MAAM,CAACC,eAAe,CAACH,KAAK,CAACtB,KAAK,CAAC;AACrC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}