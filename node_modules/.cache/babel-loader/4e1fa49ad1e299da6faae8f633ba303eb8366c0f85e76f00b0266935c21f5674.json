{"ast":null,"code":"/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nimport { backend_util, Conv3DBackpropInputV2 } from '@tensorflow/tfjs-core';\nimport { Conv3DDerInputProgram } from '../conv_backprop_webgpu';\nexport function conv3DBackpropInputV2(args) {\n  const {\n    inputs,\n    backend,\n    attrs\n  } = args;\n  const {\n    dy,\n    filter\n  } = inputs;\n  const {\n    strides,\n    pad,\n    inputShape\n  } = attrs;\n  const convInfo = backend_util.computeConv3DInfo(inputShape, filter.shape, strides, 1 /* dilations */, pad);\n  const program = new Conv3DDerInputProgram(convInfo);\n  const uniformData = [{\n    type: 'int32',\n    data: [convInfo.filterDepth, convInfo.filterHeight, convInfo.filterWidth]\n  }, {\n    type: 'int32',\n    data: [convInfo.filterDepth - 1 - convInfo.padInfo.front, convInfo.filterHeight - 1 - convInfo.padInfo.top, convInfo.filterWidth - 1 - convInfo.padInfo.left]\n  }, {\n    type: 'int32',\n    data: [convInfo.strideDepth, convInfo.strideHeight, convInfo.strideWidth]\n  }, {\n    type: 'int32',\n    data: [convInfo.outDepth]\n  }, {\n    type: 'int32',\n    data: [convInfo.outHeight]\n  }, {\n    type: 'int32',\n    data: [convInfo.outWidth]\n  }, {\n    type: 'int32',\n    data: [convInfo.outChannels]\n  }];\n  return backend.runWebGPUProgram(program, [dy, filter], dy.dtype, uniformData);\n}\nexport const conv3DBackpropInputV2Config = {\n  kernelName: Conv3DBackpropInputV2,\n  backendName: 'webgpu',\n  kernelFunc: conv3DBackpropInputV2\n};","map":{"version":3,"names":["backend_util","Conv3DBackpropInputV2","Conv3DDerInputProgram","conv3DBackpropInputV2","args","inputs","backend","attrs","dy","filter","strides","pad","inputShape","convInfo","computeConv3DInfo","shape","program","uniformData","type","data","filterDepth","filterHeight","filterWidth","padInfo","front","top","left","strideDepth","strideHeight","strideWidth","outDepth","outHeight","outWidth","outChannels","runWebGPUProgram","dtype","conv3DBackpropInputV2Config","kernelName","backendName","kernelFunc"],"sources":["/Users/jesvinblazegmail.com/PycharmProjects/tfjs-backend-webgpu/src/kernels/Conv3DBackpropInputV2.ts"],"sourcesContent":["/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n\nimport {backend_util, Conv3DBackpropInputV2, Conv3DBackpropInputV2Attrs, Conv3DBackpropInputV2Inputs, KernelConfig, KernelFunc, TensorInfo} from '@tensorflow/tfjs-core';\n\nimport {WebGPUBackend} from '../backend_webgpu';\nimport {Conv3DDerInputProgram} from '../conv_backprop_webgpu';\n\nexport function conv3DBackpropInputV2(args: {\n  inputs: Conv3DBackpropInputV2Inputs,\n  attrs: Conv3DBackpropInputV2Attrs,\n  backend: WebGPUBackend\n}): TensorInfo {\n  const {inputs, backend, attrs} = args;\n  const {dy, filter} = inputs;\n  const {strides, pad, inputShape} = attrs;\n\n  const convInfo = backend_util.computeConv3DInfo(\n      inputShape, filter.shape as [number, number, number, number, number],\n      strides, 1 /* dilations */, pad);\n\n  const program = new Conv3DDerInputProgram(convInfo);\n  const uniformData = [\n    {\n      type: 'int32',\n      data: [convInfo.filterDepth, convInfo.filterHeight, convInfo.filterWidth]\n    },\n    {\n      type: 'int32',\n      data: [\n        convInfo.filterDepth - 1 - convInfo.padInfo.front,\n        convInfo.filterHeight - 1 - convInfo.padInfo.top,\n        convInfo.filterWidth - 1 - convInfo.padInfo.left\n      ]\n    },\n    {\n      type: 'int32',\n      data: [convInfo.strideDepth, convInfo.strideHeight, convInfo.strideWidth]\n    },\n    {type: 'int32', data: [convInfo.outDepth]},\n    {type: 'int32', data: [convInfo.outHeight]},\n    {type: 'int32', data: [convInfo.outWidth]},\n    {type: 'int32', data: [convInfo.outChannels]}\n  ];\n\n  return backend.runWebGPUProgram(program, [dy, filter], dy.dtype, uniformData);\n}\n\nexport const conv3DBackpropInputV2Config: KernelConfig = {\n  kernelName: Conv3DBackpropInputV2,\n  backendName: 'webgpu',\n  kernelFunc: conv3DBackpropInputV2 as unknown as KernelFunc,\n};\n"],"mappings":"AAAA;;;;;;;;;;;;;;;;AAiBA,SAAQA,YAAY,EAAEC,qBAAqB,QAAsG,uBAAuB;AAGxK,SAAQC,qBAAqB,QAAO,yBAAyB;AAE7D,OAAM,SAAUC,qBAAqBA,CAACC,IAIrC;EACC,MAAM;IAACC,MAAM;IAAEC,OAAO;IAAEC;EAAK,CAAC,GAAGH,IAAI;EACrC,MAAM;IAACI,EAAE;IAAEC;EAAM,CAAC,GAAGJ,MAAM;EAC3B,MAAM;IAACK,OAAO;IAAEC,GAAG;IAAEC;EAAU,CAAC,GAAGL,KAAK;EAExC,MAAMM,QAAQ,GAAGb,YAAY,CAACc,iBAAiB,CAC3CF,UAAU,EAAEH,MAAM,CAACM,KAAiD,EACpEL,OAAO,EAAE,CAAC,CAAC,iBAAiBC,GAAG,CAAC;EAEpC,MAAMK,OAAO,GAAG,IAAId,qBAAqB,CAACW,QAAQ,CAAC;EACnD,MAAMI,WAAW,GAAG,CAClB;IACEC,IAAI,EAAE,OAAO;IACbC,IAAI,EAAE,CAACN,QAAQ,CAACO,WAAW,EAAEP,QAAQ,CAACQ,YAAY,EAAER,QAAQ,CAACS,WAAW;GACzE,EACD;IACEJ,IAAI,EAAE,OAAO;IACbC,IAAI,EAAE,CACJN,QAAQ,CAACO,WAAW,GAAG,CAAC,GAAGP,QAAQ,CAACU,OAAO,CAACC,KAAK,EACjDX,QAAQ,CAACQ,YAAY,GAAG,CAAC,GAAGR,QAAQ,CAACU,OAAO,CAACE,GAAG,EAChDZ,QAAQ,CAACS,WAAW,GAAG,CAAC,GAAGT,QAAQ,CAACU,OAAO,CAACG,IAAI;GAEnD,EACD;IACER,IAAI,EAAE,OAAO;IACbC,IAAI,EAAE,CAACN,QAAQ,CAACc,WAAW,EAAEd,QAAQ,CAACe,YAAY,EAAEf,QAAQ,CAACgB,WAAW;GACzE,EACD;IAACX,IAAI,EAAE,OAAO;IAAEC,IAAI,EAAE,CAACN,QAAQ,CAACiB,QAAQ;EAAC,CAAC,EAC1C;IAACZ,IAAI,EAAE,OAAO;IAAEC,IAAI,EAAE,CAACN,QAAQ,CAACkB,SAAS;EAAC,CAAC,EAC3C;IAACb,IAAI,EAAE,OAAO;IAAEC,IAAI,EAAE,CAACN,QAAQ,CAACmB,QAAQ;EAAC,CAAC,EAC1C;IAACd,IAAI,EAAE,OAAO;IAAEC,IAAI,EAAE,CAACN,QAAQ,CAACoB,WAAW;EAAC,CAAC,CAC9C;EAED,OAAO3B,OAAO,CAAC4B,gBAAgB,CAAClB,OAAO,EAAE,CAACR,EAAE,EAAEC,MAAM,CAAC,EAAED,EAAE,CAAC2B,KAAK,EAAElB,WAAW,CAAC;AAC/E;AAEA,OAAO,MAAMmB,2BAA2B,GAAiB;EACvDC,UAAU,EAAEpC,qBAAqB;EACjCqC,WAAW,EAAE,QAAQ;EACrBC,UAAU,EAAEpC;CACb","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}