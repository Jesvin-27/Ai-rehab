{"ast":null,"code":"export class ChairSquatTracker {\n  constructor() {\n    this.squatStarted = false;\n    this.repCount = 0;\n    this.voice = null;\n    this.minConfidence = 0.5;\n    this.squatThreshold = 30; // pixels between hips and knees\n  }\n  process(keypoints) {\n    if (!keypoints || keypoints.length === 0) {\n      return {\n        reps: this.repCount,\n        feedback: 'No keypoints detected'\n      };\n    }\n    const leftHip = keypoints.find(k => k.name === 'left_hip');\n    const rightHip = keypoints.find(k => k.name === 'right_hip');\n    const leftKnee = keypoints.find(k => k.name === 'left_knee');\n    const rightKnee = keypoints.find(k => k.name === 'right_knee');\n\n    // Check if all required keypoints are visible with sufficient confidence\n    if ([leftHip, rightHip, leftKnee, rightKnee].some(k => !k || k.score < this.minConfidence)) {\n      return {\n        reps: this.repCount,\n        feedback: 'Not all keypoints visible'\n      };\n    }\n    const avgHipY = (leftHip.y + rightHip.y) / 2;\n    const avgKneeY = (leftKnee.y + rightKnee.y) / 2;\n    const isSquatting = avgHipY > avgKneeY + this.squatThreshold;\n\n    // Rep counting logic\n    if (isSquatting && !this.squatStarted) {\n      this.squatStarted = true;\n      this.speak('Hold your position, good squat!');\n    }\n    if (!isSquatting && this.squatStarted) {\n      this.repCount += 1;\n      this.squatStarted = false;\n      this.speak('Squat complete. Good job!');\n    }\n    return {\n      reps: this.repCount,\n      feedback: isSquatting ? 'Squatting: Keep your back straight' : 'Standing: Ready for next squat'\n    };\n  }\n  reset() {\n    this.squatStarted = false;\n    this.repCount = 0;\n    if (this.voice) {\n      window.speechSynthesis.cancel();\n    }\n  }\n  speak(text) {\n    if ('speechSynthesis' in window) {\n      if (!this.voice) {\n        this.voice = new SpeechSynthesisUtterance();\n        this.voice.rate = 0.9;\n        this.voice.pitch = 1;\n      }\n      this.voice.text = text;\n      window.speechSynthesis.cancel();\n      window.speechSynthesis.speak(this.voice);\n    }\n  }\n}","map":{"version":3,"names":["ChairSquatTracker","constructor","squatStarted","repCount","voice","minConfidence","squatThreshold","process","keypoints","length","reps","feedback","leftHip","find","k","name","rightHip","leftKnee","rightKnee","some","score","avgHipY","y","avgKneeY","isSquatting","speak","reset","window","speechSynthesis","cancel","text","SpeechSynthesisUtterance","rate","pitch"],"sources":["/Users/jesvinblazegmail.com/PycharmProjects/Ai-rehab/src/exercises/ChairSquats.js"],"sourcesContent":["export class ChairSquatTracker {\n  constructor() {\n    this.squatStarted = false;\n    this.repCount = 0;\n    this.voice = null;\n    this.minConfidence = 0.5;\n    this.squatThreshold = 30; // pixels between hips and knees\n  }\n\n  process(keypoints) {\n    if (!keypoints || keypoints.length === 0) {\n      return { reps: this.repCount, feedback: 'No keypoints detected' };\n    }\n\n    const leftHip = keypoints.find(k => k.name === 'left_hip');\n    const rightHip = keypoints.find(k => k.name === 'right_hip');\n    const leftKnee = keypoints.find(k => k.name === 'left_knee');\n    const rightKnee = keypoints.find(k => k.name === 'right_knee');\n\n    // Check if all required keypoints are visible with sufficient confidence\n    if ([leftHip, rightHip, leftKnee, rightKnee].some(k => !k || k.score < this.minConfidence)) {\n      return { reps: this.repCount, feedback: 'Not all keypoints visible' };\n    }\n\n    const avgHipY = (leftHip.y + rightHip.y) / 2;\n    const avgKneeY = (leftKnee.y + rightKnee.y) / 2;\n    const isSquatting = avgHipY > avgKneeY + this.squatThreshold;\n\n    // Rep counting logic\n    if (isSquatting && !this.squatStarted) {\n      this.squatStarted = true;\n      this.speak('Hold your position, good squat!');\n    }\n\n    if (!isSquatting && this.squatStarted) {\n      this.repCount += 1;\n      this.squatStarted = false;\n      this.speak('Squat complete. Good job!');\n    }\n\n    return { \n      reps: this.repCount, \n      feedback: isSquatting ? 'Squatting: Keep your back straight' : 'Standing: Ready for next squat' \n    };\n  }\n\n  reset() {\n    this.squatStarted = false;\n    this.repCount = 0;\n    if (this.voice) {\n      window.speechSynthesis.cancel();\n    }\n  }\n\n  speak(text) {\n    if ('speechSynthesis' in window) {\n      if (!this.voice) {\n        this.voice = new SpeechSynthesisUtterance();\n        this.voice.rate = 0.9;\n        this.voice.pitch = 1;\n      }\n      this.voice.text = text;\n      window.speechSynthesis.cancel();\n      window.speechSynthesis.speak(this.voice);\n    }\n  }\n}"],"mappings":"AAAA,OAAO,MAAMA,iBAAiB,CAAC;EAC7BC,WAAWA,CAAA,EAAG;IACZ,IAAI,CAACC,YAAY,GAAG,KAAK;IACzB,IAAI,CAACC,QAAQ,GAAG,CAAC;IACjB,IAAI,CAACC,KAAK,GAAG,IAAI;IACjB,IAAI,CAACC,aAAa,GAAG,GAAG;IACxB,IAAI,CAACC,cAAc,GAAG,EAAE,CAAC,CAAC;EAC5B;EAEAC,OAAOA,CAACC,SAAS,EAAE;IACjB,IAAI,CAACA,SAAS,IAAIA,SAAS,CAACC,MAAM,KAAK,CAAC,EAAE;MACxC,OAAO;QAAEC,IAAI,EAAE,IAAI,CAACP,QAAQ;QAAEQ,QAAQ,EAAE;MAAwB,CAAC;IACnE;IAEA,MAAMC,OAAO,GAAGJ,SAAS,CAACK,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,IAAI,KAAK,UAAU,CAAC;IAC1D,MAAMC,QAAQ,GAAGR,SAAS,CAACK,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,IAAI,KAAK,WAAW,CAAC;IAC5D,MAAME,QAAQ,GAAGT,SAAS,CAACK,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,IAAI,KAAK,WAAW,CAAC;IAC5D,MAAMG,SAAS,GAAGV,SAAS,CAACK,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,IAAI,KAAK,YAAY,CAAC;;IAE9D;IACA,IAAI,CAACH,OAAO,EAAEI,QAAQ,EAAEC,QAAQ,EAAEC,SAAS,CAAC,CAACC,IAAI,CAACL,CAAC,IAAI,CAACA,CAAC,IAAIA,CAAC,CAACM,KAAK,GAAG,IAAI,CAACf,aAAa,CAAC,EAAE;MAC1F,OAAO;QAAEK,IAAI,EAAE,IAAI,CAACP,QAAQ;QAAEQ,QAAQ,EAAE;MAA4B,CAAC;IACvE;IAEA,MAAMU,OAAO,GAAG,CAACT,OAAO,CAACU,CAAC,GAAGN,QAAQ,CAACM,CAAC,IAAI,CAAC;IAC5C,MAAMC,QAAQ,GAAG,CAACN,QAAQ,CAACK,CAAC,GAAGJ,SAAS,CAACI,CAAC,IAAI,CAAC;IAC/C,MAAME,WAAW,GAAGH,OAAO,GAAGE,QAAQ,GAAG,IAAI,CAACjB,cAAc;;IAE5D;IACA,IAAIkB,WAAW,IAAI,CAAC,IAAI,CAACtB,YAAY,EAAE;MACrC,IAAI,CAACA,YAAY,GAAG,IAAI;MACxB,IAAI,CAACuB,KAAK,CAAC,iCAAiC,CAAC;IAC/C;IAEA,IAAI,CAACD,WAAW,IAAI,IAAI,CAACtB,YAAY,EAAE;MACrC,IAAI,CAACC,QAAQ,IAAI,CAAC;MAClB,IAAI,CAACD,YAAY,GAAG,KAAK;MACzB,IAAI,CAACuB,KAAK,CAAC,2BAA2B,CAAC;IACzC;IAEA,OAAO;MACLf,IAAI,EAAE,IAAI,CAACP,QAAQ;MACnBQ,QAAQ,EAAEa,WAAW,GAAG,oCAAoC,GAAG;IACjE,CAAC;EACH;EAEAE,KAAKA,CAAA,EAAG;IACN,IAAI,CAACxB,YAAY,GAAG,KAAK;IACzB,IAAI,CAACC,QAAQ,GAAG,CAAC;IACjB,IAAI,IAAI,CAACC,KAAK,EAAE;MACduB,MAAM,CAACC,eAAe,CAACC,MAAM,CAAC,CAAC;IACjC;EACF;EAEAJ,KAAKA,CAACK,IAAI,EAAE;IACV,IAAI,iBAAiB,IAAIH,MAAM,EAAE;MAC/B,IAAI,CAAC,IAAI,CAACvB,KAAK,EAAE;QACf,IAAI,CAACA,KAAK,GAAG,IAAI2B,wBAAwB,CAAC,CAAC;QAC3C,IAAI,CAAC3B,KAAK,CAAC4B,IAAI,GAAG,GAAG;QACrB,IAAI,CAAC5B,KAAK,CAAC6B,KAAK,GAAG,CAAC;MACtB;MACA,IAAI,CAAC7B,KAAK,CAAC0B,IAAI,GAAGA,IAAI;MACtBH,MAAM,CAACC,eAAe,CAACC,MAAM,CAAC,CAAC;MAC/BF,MAAM,CAACC,eAAe,CAACH,KAAK,CAAC,IAAI,CAACrB,KAAK,CAAC;IAC1C;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}