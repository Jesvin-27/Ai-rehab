{"ast":null,"code":"let prevState = 'sitting';\nlet lastSpeakTime = 0;\nexport function resetSitToStand() {\n  prevState = 'sitting';\n  lastSpeakTime = 0;\n}\nexport function processSitToStand(landmarks) {\n  const now = Date.now();\n  const leftHip = landmarks[23];\n  const rightHip = landmarks[24];\n  const leftKnee = landmarks[25];\n  const rightKnee = landmarks[26];\n  const leftAnkle = landmarks[27];\n  const rightAnkle = landmarks[28];\n  if (!leftHip || !rightHip || !leftKnee || !rightKnee || !leftAnkle || !rightAnkle) {\n    return {\n      speak: 'Body not fully visible. Please align with camera'\n    };\n  }\n  const getYAvg = (...points) => points.reduce((acc, pt) => acc + pt.y, 0) / points.length;\n  const hipY = getYAvg(leftHip, rightHip);\n  const kneeY = getYAvg(leftKnee, rightKnee);\n  const verticalGap = kneeY - hipY;\n  if (verticalGap > 0.1 && prevState === 'standing') {\n    prevState = 'sitting';\n    return {\n      speak: 'Sitting detected'\n    };\n  }\n  if (verticalGap < 0.02 && prevState === 'sitting') {\n    prevState = 'standing';\n    return {\n      speak: 'Good job standing up',\n      rep: 1\n    };\n  }\n  if (now - lastSpeakTime > 4000 && prevState === 'sitting') {\n    lastSpeakTime = now;\n    return {\n      speak: 'Try to stand up straight'\n    };\n  }\n  return null;\n}","map":{"version":3,"names":["prevState","lastSpeakTime","resetSitToStand","processSitToStand","landmarks","now","Date","leftHip","rightHip","leftKnee","rightKnee","leftAnkle","rightAnkle","speak","getYAvg","points","reduce","acc","pt","y","length","hipY","kneeY","verticalGap","rep"],"sources":["/Users/jesvinblazegmail.com/PycharmProjects/Ai-rehab/src/exercises/SitToStand.js"],"sourcesContent":["let prevState = 'sitting';\nlet lastSpeakTime = 0;\n\nexport function resetSitToStand() {\n  prevState = 'sitting';\n  lastSpeakTime = 0;\n}\n\nexport function processSitToStand(landmarks) {\n  const now = Date.now();\n  const leftHip = landmarks[23];\n  const rightHip = landmarks[24];\n  const leftKnee = landmarks[25];\n  const rightKnee = landmarks[26];\n  const leftAnkle = landmarks[27];\n  const rightAnkle = landmarks[28];\n\n  if (!leftHip || !rightHip || !leftKnee || !rightKnee || !leftAnkle || !rightAnkle) {\n    return { speak: 'Body not fully visible. Please align with camera' };\n  }\n\n  const getYAvg = (...points) => points.reduce((acc, pt) => acc + pt.y, 0) / points.length;\n  const hipY = getYAvg(leftHip, rightHip);\n  const kneeY = getYAvg(leftKnee, rightKnee);\n\n  const verticalGap = kneeY - hipY;\n\n  if (verticalGap > 0.1 && prevState === 'standing') {\n    prevState = 'sitting';\n    return { speak: 'Sitting detected' };\n  }\n\n  if (verticalGap < 0.02 && prevState === 'sitting') {\n    prevState = 'standing';\n    return { speak: 'Good job standing up', rep: 1 };\n  }\n\n  if (now - lastSpeakTime > 4000 && prevState === 'sitting') {\n    lastSpeakTime = now;\n    return { speak: 'Try to stand up straight' };\n  }\n\n  return null;\n}\n"],"mappings":"AAAA,IAAIA,SAAS,GAAG,SAAS;AACzB,IAAIC,aAAa,GAAG,CAAC;AAErB,OAAO,SAASC,eAAeA,CAAA,EAAG;EAChCF,SAAS,GAAG,SAAS;EACrBC,aAAa,GAAG,CAAC;AACnB;AAEA,OAAO,SAASE,iBAAiBA,CAACC,SAAS,EAAE;EAC3C,MAAMC,GAAG,GAAGC,IAAI,CAACD,GAAG,CAAC,CAAC;EACtB,MAAME,OAAO,GAAGH,SAAS,CAAC,EAAE,CAAC;EAC7B,MAAMI,QAAQ,GAAGJ,SAAS,CAAC,EAAE,CAAC;EAC9B,MAAMK,QAAQ,GAAGL,SAAS,CAAC,EAAE,CAAC;EAC9B,MAAMM,SAAS,GAAGN,SAAS,CAAC,EAAE,CAAC;EAC/B,MAAMO,SAAS,GAAGP,SAAS,CAAC,EAAE,CAAC;EAC/B,MAAMQ,UAAU,GAAGR,SAAS,CAAC,EAAE,CAAC;EAEhC,IAAI,CAACG,OAAO,IAAI,CAACC,QAAQ,IAAI,CAACC,QAAQ,IAAI,CAACC,SAAS,IAAI,CAACC,SAAS,IAAI,CAACC,UAAU,EAAE;IACjF,OAAO;MAAEC,KAAK,EAAE;IAAmD,CAAC;EACtE;EAEA,MAAMC,OAAO,GAAGA,CAAC,GAAGC,MAAM,KAAKA,MAAM,CAACC,MAAM,CAAC,CAACC,GAAG,EAAEC,EAAE,KAAKD,GAAG,GAAGC,EAAE,CAACC,CAAC,EAAE,CAAC,CAAC,GAAGJ,MAAM,CAACK,MAAM;EACxF,MAAMC,IAAI,GAAGP,OAAO,CAACP,OAAO,EAAEC,QAAQ,CAAC;EACvC,MAAMc,KAAK,GAAGR,OAAO,CAACL,QAAQ,EAAEC,SAAS,CAAC;EAE1C,MAAMa,WAAW,GAAGD,KAAK,GAAGD,IAAI;EAEhC,IAAIE,WAAW,GAAG,GAAG,IAAIvB,SAAS,KAAK,UAAU,EAAE;IACjDA,SAAS,GAAG,SAAS;IACrB,OAAO;MAAEa,KAAK,EAAE;IAAmB,CAAC;EACtC;EAEA,IAAIU,WAAW,GAAG,IAAI,IAAIvB,SAAS,KAAK,SAAS,EAAE;IACjDA,SAAS,GAAG,UAAU;IACtB,OAAO;MAAEa,KAAK,EAAE,sBAAsB;MAAEW,GAAG,EAAE;IAAE,CAAC;EAClD;EAEA,IAAInB,GAAG,GAAGJ,aAAa,GAAG,IAAI,IAAID,SAAS,KAAK,SAAS,EAAE;IACzDC,aAAa,GAAGI,GAAG;IACnB,OAAO;MAAEQ,KAAK,EAAE;IAA2B,CAAC;EAC9C;EAEA,OAAO,IAAI;AACb","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}