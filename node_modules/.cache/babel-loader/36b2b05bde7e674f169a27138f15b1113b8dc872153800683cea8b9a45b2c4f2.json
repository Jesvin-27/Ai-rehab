{"ast":null,"code":"let squatStarted = false;\nlet repCount = 0;\nlet voice;\nexport function processChairSquat(keypoints) {\n  if (!Array.isArray(keypoints) || keypoints.length === 0) return {\n    reps: repCount,\n    feedback: 'No keypoints'\n  };\n  const leftHip = keypoints.find(k => k.name === 'left_hip');\n  const rightHip = keypoints.find(k => k.name === 'right_hip');\n  const leftKnee = keypoints.find(k => k.name === 'left_knee');\n  const rightKnee = keypoints.find(k => k.name === 'right_knee');\n  if ([leftHip, rightHip, leftKnee, rightKnee].some(k => !k || k.score < 0.4)) {\n    return {\n      reps: repCount,\n      feedback: 'Posture not detected'\n    };\n  }\n  const avgHipY = (leftHip.y + rightHip.y) / 2;\n  const avgKneeY = (leftKnee.y + rightKnee.y) / 2;\n  const isSquatting = avgHipY > avgKneeY + 30;\n  if (isSquatting && !squatStarted) {\n    squatStarted = true;\n    speak('Hold your position, good squat!');\n  }\n  if (!isSquatting && squatStarted) {\n    squatStarted = false;\n    repCount += 1;\n    speak('Squat complete. Good job!');\n  }\n  return {\n    reps: repCount,\n    feedback: isSquatting ? 'Squatting' : 'Standing'\n  };\n}\nexport function resetChairSquat() {\n  squatStarted = false;\n  repCount = 0;\n  if (voice) window.speechSynthesis.cancel();\n}\nfunction speak(text) {\n  if (!voice) voice = new SpeechSynthesisUtterance();\n  voice.text = text;\n  window.speechSynthesis.cancel();\n  window.speechSynthesis.speak(voice);\n}","map":{"version":3,"names":["squatStarted","repCount","voice","processChairSquat","keypoints","Array","isArray","length","reps","feedback","leftHip","find","k","name","rightHip","leftKnee","rightKnee","some","score","avgHipY","y","avgKneeY","isSquatting","speak","resetChairSquat","window","speechSynthesis","cancel","text","SpeechSynthesisUtterance"],"sources":["/Users/jesvinblazegmail.com/PycharmProjects/Ai-rehab/src/exercises/ChairSquats.js"],"sourcesContent":["let squatStarted = false;\nlet repCount = 0;\nlet voice;\n\nexport function processChairSquat(keypoints) {\n  if (!Array.isArray(keypoints) || keypoints.length === 0) return { reps: repCount, feedback: 'No keypoints' };\n\n  const leftHip = keypoints.find(k => k.name === 'left_hip');\n  const rightHip = keypoints.find(k => k.name === 'right_hip');\n  const leftKnee = keypoints.find(k => k.name === 'left_knee');\n  const rightKnee = keypoints.find(k => k.name === 'right_knee');\n\n  if ([leftHip, rightHip, leftKnee, rightKnee].some(k => !k || k.score < 0.4)) {\n    return { reps: repCount, feedback: 'Posture not detected' };\n  }\n\n  const avgHipY = (leftHip.y + rightHip.y) / 2;\n  const avgKneeY = (leftKnee.y + rightKnee.y) / 2;\n  const isSquatting = avgHipY > avgKneeY + 30;\n\n  if (isSquatting && !squatStarted) {\n    squatStarted = true;\n    speak('Hold your position, good squat!');\n  }\n\n  if (!isSquatting && squatStarted) {\n    squatStarted = false;\n    repCount += 1;\n    speak('Squat complete. Good job!');\n  }\n\n  return {\n    reps: repCount,\n    feedback: isSquatting ? 'Squatting' : 'Standing',\n  };\n}\n\nexport function resetChairSquat() {\n  squatStarted = false;\n  repCount = 0;\n  if (voice) window.speechSynthesis.cancel();\n}\n\nfunction speak(text) {\n  if (!voice) voice = new SpeechSynthesisUtterance();\n  voice.text = text;\n  window.speechSynthesis.cancel();\n  window.speechSynthesis.speak(voice);\n}\n"],"mappings":"AAAA,IAAIA,YAAY,GAAG,KAAK;AACxB,IAAIC,QAAQ,GAAG,CAAC;AAChB,IAAIC,KAAK;AAET,OAAO,SAASC,iBAAiBA,CAACC,SAAS,EAAE;EAC3C,IAAI,CAACC,KAAK,CAACC,OAAO,CAACF,SAAS,CAAC,IAAIA,SAAS,CAACG,MAAM,KAAK,CAAC,EAAE,OAAO;IAAEC,IAAI,EAAEP,QAAQ;IAAEQ,QAAQ,EAAE;EAAe,CAAC;EAE5G,MAAMC,OAAO,GAAGN,SAAS,CAACO,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,IAAI,KAAK,UAAU,CAAC;EAC1D,MAAMC,QAAQ,GAAGV,SAAS,CAACO,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,IAAI,KAAK,WAAW,CAAC;EAC5D,MAAME,QAAQ,GAAGX,SAAS,CAACO,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,IAAI,KAAK,WAAW,CAAC;EAC5D,MAAMG,SAAS,GAAGZ,SAAS,CAACO,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,IAAI,KAAK,YAAY,CAAC;EAE9D,IAAI,CAACH,OAAO,EAAEI,QAAQ,EAAEC,QAAQ,EAAEC,SAAS,CAAC,CAACC,IAAI,CAACL,CAAC,IAAI,CAACA,CAAC,IAAIA,CAAC,CAACM,KAAK,GAAG,GAAG,CAAC,EAAE;IAC3E,OAAO;MAAEV,IAAI,EAAEP,QAAQ;MAAEQ,QAAQ,EAAE;IAAuB,CAAC;EAC7D;EAEA,MAAMU,OAAO,GAAG,CAACT,OAAO,CAACU,CAAC,GAAGN,QAAQ,CAACM,CAAC,IAAI,CAAC;EAC5C,MAAMC,QAAQ,GAAG,CAACN,QAAQ,CAACK,CAAC,GAAGJ,SAAS,CAACI,CAAC,IAAI,CAAC;EAC/C,MAAME,WAAW,GAAGH,OAAO,GAAGE,QAAQ,GAAG,EAAE;EAE3C,IAAIC,WAAW,IAAI,CAACtB,YAAY,EAAE;IAChCA,YAAY,GAAG,IAAI;IACnBuB,KAAK,CAAC,iCAAiC,CAAC;EAC1C;EAEA,IAAI,CAACD,WAAW,IAAItB,YAAY,EAAE;IAChCA,YAAY,GAAG,KAAK;IACpBC,QAAQ,IAAI,CAAC;IACbsB,KAAK,CAAC,2BAA2B,CAAC;EACpC;EAEA,OAAO;IACLf,IAAI,EAAEP,QAAQ;IACdQ,QAAQ,EAAEa,WAAW,GAAG,WAAW,GAAG;EACxC,CAAC;AACH;AAEA,OAAO,SAASE,eAAeA,CAAA,EAAG;EAChCxB,YAAY,GAAG,KAAK;EACpBC,QAAQ,GAAG,CAAC;EACZ,IAAIC,KAAK,EAAEuB,MAAM,CAACC,eAAe,CAACC,MAAM,CAAC,CAAC;AAC5C;AAEA,SAASJ,KAAKA,CAACK,IAAI,EAAE;EACnB,IAAI,CAAC1B,KAAK,EAAEA,KAAK,GAAG,IAAI2B,wBAAwB,CAAC,CAAC;EAClD3B,KAAK,CAAC0B,IAAI,GAAGA,IAAI;EACjBH,MAAM,CAACC,eAAe,CAACC,MAAM,CAAC,CAAC;EAC/BF,MAAM,CAACC,eAAe,CAACH,KAAK,CAACrB,KAAK,CAAC;AACrC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}